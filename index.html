<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Values Discovery Survey</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9ff;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .value-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .value-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .value-card.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .value-card.custom {
            border-color: #28a745;
        }

        .value-card.custom.selected {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .value-card h3 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .value-card p {
            font-size: 0.9rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .counter {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            text-align: center;
            margin: 20px 0;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .custom-section {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .custom-row {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .ranking-section {
            background: #fff8f0;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .ranking-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .rank-box {
            background: white;
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-height: 150px;
            transition: all 0.3s ease;
        }

        .rank-box.has-value {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .rank-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            line-height: 40px;
            font-weight: bold;
            margin: 0 auto 10px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            background: #f0fff0;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            display: none;
        }

        .results.show {
            display: block;
        }

        .top-values {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .top-value {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .value-rank {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .values-grid { grid-template-columns: 1fr; }
            .ranking-grid { grid-template-columns: 1fr; }
            .top-values { grid-template-columns: 1fr; }
            .custom-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Values Discovery Survey</h1>
            <p>Discover your core values through this interactive assessment</p>
        </div>

        <div class="content">
            <!-- Student Information -->
            <div class="section">
                <h2>Student Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentName">Full Name</label>
                        <input type="text" id="studentName" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="surveyDate">Date</label>
                        <input type="date" id="surveyDate">
                    </div>
                </div>
            </div>

            <!-- Instructions -->
            <div class="section">
                <h2>How This Works</h2>
                <ol>
                    <li>Select up to 6 values that resonate with you</li>
                    <li>Add custom values if needed</li>
                    <li>Choose your top 3 most important values</li>
                    <li>Generate your personalized PDF report</li>
                </ol>
            </div>

            <!-- Value Selection -->
            <div class="section">
                <h2>Step 1: Choose Your Values (Select up to 6)</h2>
                <div class="counter" id="counter">ðŸŽ¯ Select up to 6 values that resonate with you</div>
                
                <div class="values-grid" id="valuesGrid">
                    <!-- Values will be populated here -->
                </div>

                <!-- Custom Value Section -->
                <div class="custom-section">
                    <h3>Add Your Own Value</h3>
                    <div class="custom-row">
                        <div class="form-group">
                            <label for="customName">Value Name</label>
                            <input type="text" id="customName" placeholder="e.g., Innovation" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label for="customDesc">Description</label>
                            <input type="text" id="customDesc" placeholder="What this means to you" maxlength="80">
                        </div>
                        <button class="btn" onclick="addCustomValue()" style="margin: 0;">Add Value</button>
                    </div>
                    <div id="customDisplay"></div>
                </div>
            </div>

            <!-- Ranking Section -->
            <div class="ranking-section">
                <h2>Step 2: Choose Your Top 3 Values</h2>
                <p>Click on 3 of your selected values below to rank them as your top priorities:</p>
                
                <div class="values-grid" id="selectedGrid">
                    <!-- Selected values appear here -->
                </div>

                <div class="ranking-grid">
                    <div class="rank-box" id="rank1">
                        <div class="rank-number">1</div>
                        <h3>Most Important</h3>
                        <p>Click a value above to place it here</p>
                        <div id="value1"></div>
                    </div>
                    <div class="rank-box" id="rank2">
                        <div class="rank-number">2</div>
                        <h3>Second Most Important</h3>
                        <p>Click a value above to place it here</p>
                        <div id="value2"></div>
                    </div>
                    <div class="rank-box" id="rank3">
                        <div class="rank-number">3</div>
                        <h3>Third Most Important</h3>
                        <p>Click a value above to place it here</p>
                        <div id="value3"></div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="showResults()" id="resultsBtn" disabled>View My Results</button>
                </div>
            </div>

            <!-- Results -->
            <div class="results" id="results">
                <h2>Your Top 3 Values</h2>
                <div class="top-values" id="topValues"></div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generatePDF()">Generate PDF Report</button>
                    <button class="btn" onclick="resetSurvey()" style="background: #6c757d;">Start Over</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // All values data
        const values = [
            { name: "Achievement", description: "Accomplishing goals, succeeding, and reaching your potential" },
            { name: "Adventure", description: "Seeking new experiences, taking risks, and embracing the unknown" },
            { name: "Authenticity", description: "Being true to yourself and living according to your genuine beliefs" },
            { name: "Authority", description: "Having influence, control, and the ability to lead others" },
            { name: "Autonomy", description: "Independence, self-reliance, and freedom to make your own choices" },
            { name: "Balance", description: "Maintaining harmony between different aspects of life" },
            { name: "Beauty", description: "Appreciating and creating aesthetic experiences and environments" },
            { name: "Compassion", description: "Showing empathy, kindness, and care for others' wellbeing" },
            { name: "Creativity", description: "Expressing imagination, innovation, and original thinking" },
            { name: "Curiosity", description: "Having a strong desire to learn and explore new ideas" },
            { name: "Excellence", description: "Striving for the highest quality and continuous improvement" },
            { name: "Faith", description: "Spiritual beliefs, trust in higher purpose, and religious practice" },
            { name: "Family", description: "Prioritizing relationships with loved ones and family bonds" },
            { name: "Freedom", description: "Liberty, choice, and the absence of unnecessary restrictions" },
            { name: "Friendship", description: "Building and maintaining meaningful relationships with peers" },
            { name: "Fun", description: "Enjoying life, humor, playfulness, and recreational activities" },
            { name: "Growth", description: "Continuous learning, personal development, and self-improvement" },
            { name: "Health", description: "Physical, mental, and emotional wellbeing and vitality" },
            { name: "Honesty", description: "Truthfulness, integrity, and transparent communication" },
            { name: "Justice", description: "Fairness, equality, and standing up for what's right" },
            { name: "Knowledge", description: "Learning, understanding, and the pursuit of wisdom" },
            { name: "Leadership", description: "Guiding others, taking initiative, and making important decisions" },
            { name: "Love", description: "Giving and receiving deep affection and emotional connection" },
            { name: "Meaningful Work", description: "Engaging in work that has purpose and personal significance" },
            { name: "Nature", description: "Connecting with and protecting the natural environment" },
            { name: "Peace", description: "Seeking harmony, tranquility, and resolution of conflicts" },
            { name: "Recognition", description: "Being acknowledged, appreciated, and respected by others" },
            { name: "Security", description: "Safety, stability, and protection from harm or uncertainty" },
            { name: "Service", description: "Helping others, contributing to society, and making a difference" },
            { name: "Spirituality", description: "Connection to something greater than yourself and inner peace" },
            { name: "Success", description: "Achieving goals and reaching desired outcomes" },
            { name: "Travel", description: "Exploring new places, cultures, and expanding horizons" },
            { name: "Truth", description: "Seeking and upholding what is honest, genuine, and real" },
            { name: "Wealth", description: "Accumulating financial resources and material prosperity" },
            { name: "Wisdom", description: "Applying knowledge and experience to make sound decisions" }
        ];

        let selectedValues = [];
        let customValues = [];
        let topThree = [null, null, null];
        let studentInfo = {};

        // Initialize survey
        function init() {
            document.getElementById('surveyDate').value = new Date().toISOString().split('T')[0];
            populateGrid();
        }

        // Populate values grid
        function populateGrid() {
            const grid = document.getElementById('valuesGrid');
            grid.innerHTML = '';

            const allValues = [...values, ...customValues];
            allValues.sort(() => Math.random() - 0.5);

            allValues.forEach(value => {
                const card = document.createElement('div');
                card.className = 'value-card';
                if (value.isCustom) card.classList.add('custom');
                
                const isSelected = selectedValues.some(v => v.name === value.name && Boolean(v.isCustom) === Boolean(value.isCustom));
                if (isSelected) card.classList.add('selected');

                card.innerHTML = `
                    <h3>${value.name}${value.isCustom ? ' âœ¨' : ''}</h3>
                    <p>${value.description}</p>
                `;

                card.onclick = () => toggleValue(card, value);
                grid.appendChild(card);
            });
        }

        // Toggle value selection
        function toggleValue(card, value) {
            const isSelected = selectedValues.some(v => v.name === value.name && Boolean(v.isCustom) === Boolean(value.isCustom));

            if (isSelected) {
                selectedValues = selectedValues.filter(v => !(v.name === value.name && Boolean(v.isCustom) === Boolean(value.isCustom)));
                card.classList.remove('selected');
            } else {
                if (selectedValues.length >= 6) {
                    alert('You can only select up to 6 values. Please deselect one first.');
                    return;
                }
                selectedValues.push(value);
                card.classList.add('selected');
            }

            updateCounter();
            updateSelectedGrid();
        }

        // Add custom value
        function addCustomValue() {
            const name = document.getElementById('customName').value.trim();
            const description = document.getElementById('customDesc').value.trim();

            if (!name || !description) {
                alert('Please provide both a name and description.');
                return;
            }

            if (selectedValues.length >= 6) {
                alert('You already have 6 values selected. Please deselect one first.');
                return;
            }

            const customValue = { name, description, isCustom: true };
            customValues.push(customValue);
            selectedValues.push(customValue);

            document.getElementById('customName').value = '';
            document.getElementById('customDesc').value = '';

            populateGrid();
            updateCounter();
            updateSelectedGrid();
            displayCustomValues();
        }

        // Display custom values
        function displayCustomValues() {
            const display = document.getElementById('customDisplay');
            if (customValues.length === 0) {
                display.innerHTML = '';
                return;
            }

            display.innerHTML = '<h4>Your Custom Values:</h4>' +
                customValues.map((v, i) => `
                    <div style="background: white; border: 2px solid #28a745; border-radius: 8px; padding: 10px; margin: 5px 0; position: relative;">
                        <strong>${v.name} âœ¨</strong><br>
                        <small>${v.description}</small>
                        <button onclick="removeCustom(${i})" style="position: absolute; top: 5px; right: 5px; background: #dc3545; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer;">Ã—</button>
                    </div>
                `).join('');
        }

        // Remove custom value
        function removeCustom(index) {
            const removed = customValues[index];
            customValues.splice(index, 1);
            selectedValues = selectedValues.filter(v => !(v.isCustom && v.name === removed.name));
            populateGrid();
            updateCounter();
            updateSelectedGrid();
            displayCustomValues();
        }

        // Update counter
        function updateCounter() {
            const counter = document.getElementById('counter');
            const remaining = 6 - selectedValues.length;

            if (selectedValues.length === 0) {
                counter.innerHTML = 'ðŸŽ¯ Select up to 6 values that resonate with you';
            } else if (remaining > 0) {
                counter.innerHTML = `âœ… ${selectedValues.length} selected â€¢ You can select ${remaining} more value${remaining === 1 ? '' : 's'}`;
            } else {
                counter.innerHTML = 'ðŸŽ‰ Perfect! You\'ve selected 6 values. Now choose your top 3 below!';
            }
        }

        // Update selected values grid for ranking
        function updateSelectedGrid() {
            const grid = document.getElementById('selectedGrid');
            grid.innerHTML = '';

            selectedValues.forEach(value => {
                const card = document.createElement('div');
                card.className = 'value-card';
                if (value.isCustom) card.classList.add('custom');

                // Check if already ranked
                const isRanked = topThree.includes(value);
                if (isRanked) card.style.opacity = '0.5';

                card.innerHTML = `
                    <h3>${value.name}${value.isCustom ? ' âœ¨' : ''}</h3>
                    <p>${value.description}</p>
                `;

                card.onclick = () => rankValue(value);
                grid.appendChild(card);
            });
        }

        // Rank a value in top 3
        function rankValue(value) {
            // Find first empty slot
            for (let i = 0; i < 3; i++) {
                if (!topThree[i]) {
                    topThree[i] = value;
                    updateRankDisplay();
                    updateSelectedGrid();
                    
                    if (topThree[0] && topThree[1] && topThree[2]) {
                        document.getElementById('resultsBtn').disabled = false;
                    }
                    return;
                }
            }

            // If all slots full, replace the last one
            topThree[2] = value;
            updateRankDisplay();
            updateSelectedGrid();
        }

        // Update rank display
        function updateRankDisplay() {
            for (let i = 0; i < 3; i++) {
                const rankBox = document.getElementById(`rank${i + 1}`);
                const valueDiv = document.getElementById(`value${i + 1}`);
                
                if (topThree[i]) {
                    rankBox.classList.add('has-value');
                    valueDiv.innerHTML = `
                        <div style="background: white; padding: 10px; border-radius: 8px; margin-top: 10px;">
                            <strong>${topThree[i].name}${topThree[i].isCustom ? ' âœ¨' : ''}</strong><br>
                            <small>${topThree[i].description}</small>
                            <button onclick="removeRank(${i})" style="float: right; background: #dc3545; color: white; border: none; border-radius: 3px; padding: 2px 6px; cursor: pointer;">Remove</button>
                        </div>
                    `;
                } else {
                    rankBox.classList.remove('has-value');
                    valueDiv.innerHTML = '';
                }
            }
        }

        // Remove from ranking
        function removeRank(index) {
            topThree[index] = null;
            updateRankDisplay();
            updateSelectedGrid();
            document.getElementById('resultsBtn').disabled = !(topThree[0] && topThree[1] && topThree[2]);
        }

        // Show results
        function showResults() {
            studentInfo = {
                name: document.getElementById('studentName').value,
                date: document.getElementById('surveyDate').value
            };

            const resultsDiv = document.getElementById('results');
            const topValuesDiv = document.getElementById('topValues');

            topValuesDiv.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const value = topThree[i];
                const card = document.createElement('div');
                card.className = 'top-value';
                card.innerHTML = `
                    <div class="value-rank">#${i + 1}</div>
                    <h3>${value.name}${value.isCustom ? ' âœ¨' : ''}</h3>
                    <p>${value.description}</p>
                    ${value.isCustom ? '<div style="color: #28a745; font-weight: bold; margin-top: 10px;">Your Custom Value</div>' : ''}
                `;
                topValuesDiv.appendChild(card);
            }

            resultsDiv.classList.add('show');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Generate PDF
        function generatePDF() {
            if (!studentInfo.name) {
                alert('Please enter your name first.');
                return;
            }

            // Create HTML content
            let topThreeHTML = '';
            for (let i = 0; i < 3; i++) {
                const value = topThree[i];
                topThreeHTML += `
                    <div style="border: 3px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 10px;">
                        <h3 style="color: #667eea; font-size: 24px; margin-bottom: 10px;">#${i + 1} - ${value.name}${value.isCustom ? ' âœ¨' : ''}</h3>
                        <p style="color: #555; font-size: 16px;">${value.description}</p>
                        ${value.isCustom ? '<p style="color: #28a745; font-weight: bold; margin-top: 10px;">Your Personal Custom Value</p>' : ''}
                    </div>
                `;
            }

            // All 6 selected values
            let allSixHTML = '';
            for (let i = 0; i < selectedValues.length; i++) {
                const value = selectedValues[i];
                let rankText = '';
                for (let j = 0; j < 3; j++) {
                    if (topThree[j] && topThree[j].name === value.name && Boolean(topThree[j].isCustom) === Boolean(value.isCustom)) {
                        rankText = ` (Ranked #${j + 1})`;
                        break;
                    }
                }

                const borderColor = value.isCustom ? '#28a745' : '#ddd';
                allSixHTML += `
                    <div style="border: 2px solid ${borderColor}; padding: 15px; margin: 10px 0; border-radius: 8px; background: #fafafa;">
                        <h4 style="color: #2c3e50; margin-bottom: 5px;">${value.name}${value.isCustom ? ' âœ¨' : ''}${rankText}</h4>
                        <p style="color: #666; font-size: 14px;">${value.description}</p>
                        ${value.isCustom ? '<p style="color: #28a745; font-weight: bold; font-size: 12px; margin-top: 5px;">Your Personal Custom Value</p>' : ''}
                    </div>
                `;
            }

            const htmlContent = `<!DOCTYPE html>
<html>
<head>
    <title>Values Survey Results</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
        h1, h2 { color: #2c3e50; }
    </style>
</head>
<body>
    <h1 style="text-align: center;">Values Discovery Survey Results</h1>
    
    <div style="background: #f8f9ff; padding: 20px; border-radius: 10px; border: 2px solid #667eea; margin: 20px 0;">
        <strong>Name:</strong> ${studentInfo.name}<br>
        <strong>Date:</strong> ${new Date(studentInfo.date).toLocaleDateString()}
    </div>
    
    <h2>Your Top 3 Core Values (Ranked)</h2>
    <p>These are your most important values - the principles that should guide your key life decisions:</p>
    ${topThreeHTML}

    <h2 style="color: #d63384;">All Your Selected Values (${selectedValues.length} Total)</h2>
    <p><strong>These are all ${selectedValues.length} values you initially selected as important to you.</strong> This serves as a point-in-time record to help you track how your values may evolve over time:</p>
    
    <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 8px; margin: 20px 0;">
        <strong>ðŸ’¡ Future Reflection:</strong> When you retake this survey later, compare these results to see how your values have remained consistent or evolved.
    </div>
    
    ${allSixHTML}
    
    <div style="text-align: center; margin-top: 50px; border-top: 2px solid #eee; padding-top: 20px;">
        <p><strong>Values Discovery Survey</strong> | Generated on ${new Date().toLocaleDateString()}</p>
        <p style="font-style: italic;">These values represent what matters most to you.</p>
    </div>
</body>
</html>`;

            // Open in new window
            const printWindow = window.open('', '_blank');
            if (printWindow) {
                printWindow.document.write(htmlContent);
                printWindow.document.close();
                printWindow.onload = () => setTimeout(() => printWindow.print(), 1000);
                alert('PDF window opened! Use Ctrl+P to save as PDF.');
            } else {
                // Fallback: download as HTML file
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${studentInfo.name.replace(/\s+/g, '_')}_Values_Survey.html`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                alert('HTML file downloaded! Open it in your browser and print as PDF.');
            }
        }

        // Reset survey
        function resetSurvey() {
            selectedValues = [];
            customValues = [];
            topThree = [null, null, null];
            studentInfo = {};
            
            document.getElementById('studentName').value = '';
            document.getElementById('surveyDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('customName').value = '';
            document.getElementById('customDesc').value = '';
            document.getElementById('results').classList.remove('show');
            document.getElementById('resultsBtn').disabled = true;
            
            populateGrid();
            updateCounter();
            updateSelectedGrid();
            displayCustomValues();
            
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`rank${i}`).classList.remove('has-value');
                document.getElementById(`value${i}`).innerHTML = '';
            }
        }

        // Initialize when page loads
        window.onload = init;
    </script>
</body>
</html>
